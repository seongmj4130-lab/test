# alpha_short (단기/장기 랭킹 결합 비율) 설명

## 개념

`alpha_short`는 **단기 랭킹(20일)**과 **장기 랭킹(120일)**을 결합할 때 사용하는 가중치입니다.

## 수식

```
score_ens = alpha_short × score_short + alpha_long × score_long
```

여기서:
- `alpha_short`: 단기 랭킹 가중치 (0.0 ~ 1.0)
- `alpha_long`: 장기 랭킹 가중치 (자동 계산: `1.0 - alpha_short`)
- `score_short`: 단기 랭킹 점수 (20일 수익률 예측)
- `score_long`: 장기 랭킹 점수 (120일 수익률 예측)
- `score_ens`: 최종 통합 랭킹 점수 (L7 백테스트에 사용)

## 현재 설정

```yaml
l6r:
  alpha_short: 0.5  # 단기 50%, 장기 50% (5:5 비율)
  alpha_long: null  # 자동으로 0.5 (1.0 - 0.5)
```

**의미**: 단기 랭킹과 장기 랭킹을 동일한 비중(50:50)으로 결합

## 제안하는 변경

```yaml
l6r:
  alpha_short: 0.6  # 단기 60%, 장기 40% (6:4 비율)
  alpha_long: null  # 자동으로 0.4 (1.0 - 0.6)
```

**의미**: 단기 랭킹에 더 높은 가중치를 부여 (60:40 비율)

## 왜 이렇게 변경하는가?

### 현재 측정 결과

| 랭킹 타입 | Hit Ratio | 설명 |
|----------|-----------|------|
| **단기 랭킹** | **41.58%** | 20일 수익률 예측 |
| **장기 랭킹** | **38.72%** | 120일 수익률 예측 |
| **통합 랭킹** | **41.58%** | 현재 5:5 결합 |

### 분석

1. **단기 랭킹이 더 좋은 성과**: 41.58% > 38.72% (차이: 2.86%p)
2. **현재 통합 랭킹 = 단기 랭킹**: 5:5 결합인데도 단기와 동일한 Hit Ratio
   - 이는 단기 랭킹이 더 강한 신호를 가지고 있음을 의미

### 예상 효과

단기 랭킹에 더 높은 가중치(0.6)를 주면:
- 단기 랭킹의 영향력 증가 (50% → 60%)
- 장기 랭킹의 영향력 감소 (50% → 40%)
- **예상**: Hit Ratio가 41.58%에서 **42~43%**로 개선 가능

## 계산 예시

### 현재 (alpha_short = 0.5)
```
종목 A:
  score_short = 0.8 (단기 랭킹 상위)
  score_long = 0.3 (장기 랭킹 중위)

  score_ens = 0.5 × 0.8 + 0.5 × 0.3
           = 0.4 + 0.15
           = 0.55
```

### 변경 후 (alpha_short = 0.6)
```
종목 A:
  score_short = 0.8 (단기 랭킹 상위)
  score_long = 0.3 (장기 랭킹 중위)

  score_ens = 0.6 × 0.8 + 0.4 × 0.3
           = 0.48 + 0.12
           = 0.60  ← 단기 랭킹 영향력 증가
```

## 국면별 조정 (이미 구현됨)

현재 시스템은 시장 국면에 따라 `alpha_short`를 자동 조정합니다:

```yaml
l6r:
  regime_alpha:
    bull_strong: 0.6  # 상승장: 단기 랭킹 강조
    bull_weak: 0.6
    neutral: 0.5       # 중립: 균형
    bear_weak: 0.4     # 하락장: 장기 랭킹 강조
    bear_strong: 0.4
```

**의미**:
- **상승장 (Bull)**: 단기 모멘텀이 중요 → `alpha_short = 0.6`
- **하락장 (Bear)**: 장기 가치가 중요 → `alpha_short = 0.4`
- **중립 (Neutral)**: 균형 유지 → `alpha_short = 0.5`

## 결론

`alpha_short: 0.5 → 0.6` 변경은:
1. **기본값 변경**: 전체적으로 단기 랭킹에 더 높은 가중치
2. **국면별 조정 유지**: 시장 상황에 따라 자동 조정 (0.4 ~ 0.6)
3. **예상 효과**: Hit Ratio 1~2%p 개선 가능

## 참고 코드 위치

- **설정**: `configs/config.yaml` → `l6r.alpha_short`
- **구현**: `src/tracks/track_b/stages/modeling/l6r_ranking_scoring.py:389-393`
- **국면별 조정**: `src/tracks/track_b/stages/modeling/l6r_ranking_scoring.py:348-388`
