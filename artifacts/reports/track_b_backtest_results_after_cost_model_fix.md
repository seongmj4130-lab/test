# Track B 백테스트 결과 (거래비용 모델 수정 전/후 비교)

**변경 요약**: L7의 거래비용 차감이 `턴오버 기반`으로 적용되도록 수정 (고정 10bp 차감 제거) + slippage_bps 옵션 추가

## 전략별 원본 bt_metrics (수정 후)
### bt20_short
| phase | net_sharpe | net_total_return | net_cagr | net_mdd | net_calmar_ratio | net_profit_factor | net_hit_ratio | avg_turnover_oneway | avg_trade_duration | avg_cost_pct | gross_minus_net_total_return_pct | n_rebalances | date_start | date_end |
|---|---|---|---|---|---|---|---|---|---|---|---|---|---|---|
| dev | 0.3029829900092536 | 0.2857316197084127 | 0.0370243945704371 | -0.3324375594726183 | 0.111372477373414 | 1.3027028105142102 | 0.5 | 0.1730620155038759 | 29.736453201970445 | 0.0113267441860465 | 0.0126497689038542 | 86 | 2016-01-20 | 2022-12-19 |
| holdout | 0.5290909675655657 | 0.1107973717419572 | 0.0599687463088378 | -0.0577347786122822 | 1.0386936219424656 | 1.5186796494372945 | 0.391304347826087 | 0.2391304347826086 | 29.83333333333333 | 0.0167391304347826 | 0.0042425619513102 | 23 | 2023-01-17 | 2024-11-06 |

### bt20_ens
| phase | net_sharpe | net_total_return | net_cagr | net_mdd | net_calmar_ratio | net_profit_factor | net_hit_ratio | avg_turnover_oneway | avg_trade_duration | avg_cost_pct | gross_minus_net_total_return_pct | n_rebalances | date_start | date_end |
|---|---|---|---|---|---|---|---|---|---|---|---|---|---|---|
| dev | 0.3185042016782177 | 0.3113372349293759 | 0.0399867229062735 | -0.3398629662714764 | 0.1176554284362154 | 1.318176088759589 | 0.5 | 0.1567031206043496 | 29.730557256582976 | 0.0102863645997243 | 0.0117106661050974 | 86 | 2016-01-20 | 2022-12-19 |
| holdout | 0.1460071127055061 | 0.019298746458578 | 0.0106507239975932 | -0.0682656822663237 | 0.156018714586954 | 1.1166777273718602 | 0.391304347826087 | 0.2193069104644467 | 29.83333333333333 | 0.0146069995127442 | 0.0034218752141266 | 23 | 2023-01-17 | 2024-11-06 |

### bt120_long
| phase | net_sharpe | net_total_return | net_cagr | net_mdd | net_calmar_ratio | net_profit_factor | net_hit_ratio | avg_turnover_oneway | avg_trade_duration | avg_cost_pct | gross_minus_net_total_return_pct | n_rebalances | date_start | date_end |
|---|---|---|---|---|---|---|---|---|---|---|---|---|---|---|
| dev | 0.1339918459216453 | 0.0637512382390215 | 0.0089798899833177 | -0.3121498111802675 | 0.0287678853604427 | 1.1218562016836005 | 0.5465116279069767 | 0.0698158914728682 | 29.70388116914231 | 0.004009738372093 | 0.0036779257433232 | 86 | 2016-01-20 | 2022-12-19 |
| holdout | 0.5117354798816418 | 0.0765622888482135 | 0.0417359924391287 | -0.0601993916945596 | 0.6932959165250251 | 1.5005048005730812 | 0.4347826086956521 | 0.0717391304347826 | 30.04423076923077 | 0.0045532608695652 | 0.0011228463873433 | 23 | 2023-01-17 | 2024-11-06 |

### bt120_ens
| phase | net_sharpe | net_total_return | net_cagr | net_mdd | net_calmar_ratio | net_profit_factor | net_hit_ratio | avg_turnover_oneway | avg_trade_duration | avg_cost_pct | gross_minus_net_total_return_pct | n_rebalances | date_start | date_end |
|---|---|---|---|---|---|---|---|---|---|---|---|---|---|---|
| dev | 0.1405297491318795 | 0.0700336085502806 | 0.0098396960116293 | -0.3045626363619619 | 0.0323076268618033 | 1.1278233399785214 | 0.5232558139534884 | 0.0694282945736434 | 29.70571291406625 | 0.0039908430232558 | 0.003681522787224 | 86 | 2016-01-20 | 2022-12-19 |
| holdout | 0.4797213287427002 | 0.0722943070933312 | 0.0394449656381699 | -0.0590709304950095 | 0.6677559555541842 | 1.46710188490468 | 0.4347826086956521 | 0.0744565217391304 | 30.053435114503817 | 0.0047032608695652 | 0.0011556171114457 | 23 | 2023-01-17 | 2024-11-06 |

## 수정 전/후 비교표
| strategy | phase | metric | before | after | delta |
|---|---|---|---|---|---|
| bt20_short | dev | Net Sharpe Ratio | 0.3029829900092536 | 0.3029829900092536 | 0.0 |
| bt20_short | dev | Net Total Return | 0.2857316197084127 | 0.2857316197084127 | 0.0 |
| bt20_short | dev | Net CAGR | 0.0370243945704371 | 0.0370243945704371 | 0.0 |
| bt20_short | dev | Net MDD | -0.3324375594726183 | -0.3324375594726183 | 0.0 |
| bt20_short | dev | Calmar Ratio | 0.111372477373414 | 0.111372477373414 | 0.0 |
| bt20_short | dev | Profit Factor | 1.3027028105142102 | 1.3027028105142102 | 0.0 |
| bt20_short | dev | Hit Ratio | 0.5 | 0.5 | 0.0 |
| bt20_short | dev | Avg Turnover (one-way) | 0.1730620155038759 | 0.1730620155038759 | 0.0 |
| bt20_short | dev | Avg Trade Duration | 29.736453201970445 | 29.736453201970445 | 0.0 |
| bt20_short | dev | Avg Cost (%) | 0.0113267441860465 | 0.0113267441860465 | 0.0 |
| bt20_short | dev | Gross - Net Total Return | 0.0126497689038542 | 0.0126497689038542 | 0.0 |
| bt20_short | holdout | Net Sharpe Ratio | 0.5290909675655657 | 0.5290909675655657 | 0.0 |
| bt20_short | holdout | Net Total Return | 0.1107973717419572 | 0.1107973717419572 | 0.0 |
| bt20_short | holdout | Net CAGR | 0.0599687463088378 | 0.0599687463088378 | 0.0 |
| bt20_short | holdout | Net MDD | -0.0577347786122822 | -0.0577347786122822 | 0.0 |
| bt20_short | holdout | Calmar Ratio | 1.0386936219424656 | 1.0386936219424656 | 0.0 |
| bt20_short | holdout | Profit Factor | 1.5186796494372945 | 1.5186796494372945 | 0.0 |
| bt20_short | holdout | Hit Ratio | 0.391304347826087 | 0.391304347826087 | 0.0 |
| bt20_short | holdout | Avg Turnover (one-way) | 0.2391304347826086 | 0.2391304347826086 | 0.0 |
| bt20_short | holdout | Avg Trade Duration | 29.83333333333333 | 29.83333333333333 | 0.0 |
| bt20_short | holdout | Avg Cost (%) | 0.0167391304347826 | 0.0167391304347826 | 0.0 |
| bt20_short | holdout | Gross - Net Total Return | 0.0042425619513102 | 0.0042425619513102 | 0.0 |
| bt20_ens | dev | Net Sharpe Ratio | 0.3185042016782177 | 0.3185042016782177 | 0.0 |
| bt20_ens | dev | Net Total Return | 0.3113372349293759 | 0.3113372349293759 | 0.0 |
| bt20_ens | dev | Net CAGR | 0.0399867229062735 | 0.0399867229062735 | 0.0 |
| bt20_ens | dev | Net MDD | -0.3398629662714764 | -0.3398629662714764 | 0.0 |
| bt20_ens | dev | Calmar Ratio | 0.1176554284362154 | 0.1176554284362154 | 0.0 |
| bt20_ens | dev | Profit Factor | 1.318176088759589 | 1.318176088759589 | 0.0 |
| bt20_ens | dev | Hit Ratio | 0.5 | 0.5 | 0.0 |
| bt20_ens | dev | Avg Turnover (one-way) | 0.1567031206043496 | 0.1567031206043496 | 0.0 |
| bt20_ens | dev | Avg Trade Duration | 29.730557256582976 | 29.730557256582976 | 0.0 |
| bt20_ens | dev | Avg Cost (%) | 0.0102863645997243 | 0.0102863645997243 | 0.0 |
| bt20_ens | dev | Gross - Net Total Return | 0.0117106661050974 | 0.0117106661050974 | 0.0 |
| bt20_ens | holdout | Net Sharpe Ratio | 0.1460071127055061 | 0.1460071127055061 | 0.0 |
| bt20_ens | holdout | Net Total Return | 0.019298746458578 | 0.019298746458578 | 0.0 |
| bt20_ens | holdout | Net CAGR | 0.0106507239975932 | 0.0106507239975932 | 0.0 |
| bt20_ens | holdout | Net MDD | -0.0682656822663237 | -0.0682656822663237 | 0.0 |
| bt20_ens | holdout | Calmar Ratio | 0.156018714586954 | 0.156018714586954 | 0.0 |
| bt20_ens | holdout | Profit Factor | 1.1166777273718602 | 1.1166777273718602 | 0.0 |
| bt20_ens | holdout | Hit Ratio | 0.391304347826087 | 0.391304347826087 | 0.0 |
| bt20_ens | holdout | Avg Turnover (one-way) | 0.2193069104644468 | 0.2193069104644467 | -1.1102230246251565e-16 |
| bt20_ens | holdout | Avg Trade Duration | 29.83333333333333 | 29.83333333333333 | 0.0 |
| bt20_ens | holdout | Avg Cost (%) | 0.0146069995127442 | 0.0146069995127442 | 0.0 |
| bt20_ens | holdout | Gross - Net Total Return | 0.0034218752141266 | 0.0034218752141266 | 0.0 |
| bt120_long | dev | Net Sharpe Ratio | 0.2016791350101066 | 0.1339918459216453 | -0.0676872890884613 |
| bt120_long | dev | Net Total Return | 0.1317187832826851 | 0.0637512382390215 | -0.0679675450436636 |
| bt120_long | dev | Net CAGR | 0.0180602099131519 | 0.0089798899833177 | -0.009080319929834199 |
| bt120_long | dev | Net MDD | -0.2994767526125382 | -0.3121498111802675 | -0.012673058567729323 |
| bt120_long | dev | Calmar Ratio | 0.0603058826957368 | 0.0287678853604427 | -0.031537997335294096 |
| bt120_long | dev | Profit Factor | 1.1865921217234696 | 1.1218562016836005 | -0.06473592003986917 |
| bt120_long | dev | Hit Ratio | 0.4883720930232558 | 0.5465116279069767 | 0.05813953488372092 |
| bt120_long | dev | Avg Turnover (one-way) | 0.1569767441860465 | 0.0698158914728682 | -0.08716085271317832 |
| bt120_long | dev | Avg Trade Duration | 29.666666666666668 | 29.70388116914231 | 0.037214502475642064 |
| bt120_long | dev | Avg Cost (%) | 0.0085453488372093 | 0.004009738372093 | -0.0045356104651162995 |
| bt120_long | dev | Gross - Net Total Return | 0.0083363216127796 | 0.0036779257433232 | -0.0046583958694564 |
| bt120_long | holdout | Net Sharpe Ratio | 0.4220819232925324 | 0.5117354798816418 | 0.0896535565891094 |
| bt120_long | holdout | Net Total Return | 0.0700387851388417 | 0.0765622888482135 | 0.006523503709371811 |
| bt120_long | holdout | Net CAGR | 0.0382325734527304 | 0.0417359924391287 | 0.0035034189863982976 |
| bt120_long | holdout | Net MDD | -0.0644405167532327 | -0.0601993916945596 | 0.0042411250586730995 |
| bt120_long | holdout | Calmar Ratio | 0.5933002306473977 | 0.6932959165250251 | 0.09999568587762742 |
| bt120_long | holdout | Profit Factor | 1.390489216859391 | 1.5005048005730812 | 0.11001558371369025 |
| bt120_long | holdout | Hit Ratio | 0.4347826086956521 | 0.4347826086956521 | 0.0 |
| bt120_long | holdout | Avg Turnover (one-way) | 0.1318840579710145 | 0.0717391304347826 | -0.06014492753623189 |
| bt120_long | holdout | Avg Trade Duration | 29.97290640394089 | 30.04423076923077 | 0.07132436528987895 |
| bt120_long | holdout | Avg Cost (%) | 0.0076869565217391 | 0.0045532608695652 | -0.0031336956521738997 |
| bt120_long | holdout | Gross - Net Total Return | 0.0018902520738512 | 0.0011228463873433 | -0.0007674056865078999 |
| bt120_ens | dev | Net Sharpe Ratio | 0.228055912383521 | 0.1405297491318795 | -0.0875261632516415 |
| bt120_ens | dev | Net Total Return | 0.1583464843942728 | 0.0700336085502806 | -0.0883128758439922 |
| bt120_ens | dev | Net CAGR | 0.0214907965377588 | 0.0098396960116293 | -0.011651100526129499 |
| bt120_ens | dev | Net MDD | -0.2855202854807669 | -0.3045626363619619 | -0.01904235088119499 |
| bt120_ens | dev | Calmar Ratio | 0.0752688955237351 | 0.0323076268618033 | -0.0429612686619318 |
| bt120_ens | dev | Profit Factor | 1.2132546867962803 | 1.1278233399785214 | -0.08543134681775899 |
| bt120_ens | dev | Hit Ratio | 0.5 | 0.5232558139534884 | 0.023255813953488413 |
| bt120_ens | dev | Avg Turnover (one-way) | 0.1587209302325581 | 0.0694282945736434 | -0.0892926356589147 |
| bt120_ens | dev | Avg Trade Duration | 29.669005102040817 | 29.70571291406625 | 0.036707812025433384 |
| bt120_ens | dev | Avg Cost (%) | 0.0086255813953488 | 0.0039908430232558 | -0.004634738372093001 |
| bt120_ens | dev | Gross - Net Total Return | 0.0086081355823399 | 0.003681522787224 | -0.0049266127951159 |
| bt120_ens | holdout | Net Sharpe Ratio | 0.4458136761548157 | 0.4797213287427002 | 0.033907652587884474 |
| bt120_ens | holdout | Net Total Return | 0.0711925012872449 | 0.0722943070933312 | 0.0011018058060863062 |
| bt120_ens | holdout | Net CAGR | 0.0388528631829456 | 0.0394449656381699 | 0.0005921024552242998 |
| bt120_ens | holdout | Net MDD | -0.0540501955886297 | -0.0590709304950095 | -0.0050207349063797965 |
| bt120_ens | holdout | Calmar Ratio | 0.7188292800760728 | 0.6677559555541842 | -0.05107332452188862 |
| bt120_ens | holdout | Profit Factor | 1.4136883279528358 | 1.46710188490468 | 0.05341355695184413 |
| bt120_ens | holdout | Hit Ratio | 0.4347826086956521 | 0.4347826086956521 | 0.0 |
| bt120_ens | holdout | Avg Turnover (one-way) | 0.1318840579710145 | 0.0744565217391304 | -0.057427536231884097 |
| bt120_ens | holdout | Avg Trade Duration | 29.98275862068965 | 30.053435114503817 | 0.0706764938141653 |
| bt120_ens | holdout | Avg Cost (%) | 0.0076869565217391 | 0.0047032608695652 | -0.0029836956521738997 |
| bt120_ens | holdout | Gross - Net Total Return | 0.0018903266655949 | 0.0011556171114457 | -0.0007347095541492001 |

## 다음 액션(추천)
- `slippage_bps`를 0.0→5.0 등으로 올려 현실성 점검(성과 과대추정 여부 확인)
- bt20의 MDD가 여전히 크면: `regime.exposure_bear_*` 추가 축소 또는 `volatility_adjustment_min/max` 튜닝
